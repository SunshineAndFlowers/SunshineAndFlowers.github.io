<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css" integrity="sha256-/4UQcSmErDzPCMAiuOiWPVVsNN2s3ZY/NsmXNcj0IFc=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.15.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="[toc] 课程介绍1 主要内容 SpringBoot Spring MVC MyBatis  2 课程目的​	实现网站开发后端功能 后端三大框架SSM1 SSM框架说明 Spring ​		Spring是一个轻量级的容器和框架，为开发者提供了一个IoC容器和AOP框架，Spring框架包含很多核心子项目。  Spring MVC ​		SpringMVC是Spring框架的一个核心子项目，是一个">
<meta property="og:type" content="article">
<meta property="og:title" content="Mybatis">
<meta property="og:url" content="http://example.com/2021/02/10/Mybatis/index.html">
<meta property="og:site_name" content="JavaWorld">
<meta property="og:description" content="[toc] 课程介绍1 主要内容 SpringBoot Spring MVC MyBatis  2 课程目的​	实现网站开发后端功能 后端三大框架SSM1 SSM框架说明 Spring ​		Spring是一个轻量级的容器和框架，为开发者提供了一个IoC容器和AOP框架，Spring框架包含很多核心子项目。  Spring MVC ​		SpringMVC是Spring框架的一个核心子项目，是一个">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230425182031191-16836842176431.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230425182151532-16836842176442.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230421092823099-16836842176443.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230420184116832-16836842176444.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230421093025690-16836842176446.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/mybatis-16836842176445.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/SqlSession-16836842176447.png">
<meta property="og:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230426164536349-16834425743932-16836842176448.png">
<meta property="article:published_time" content="2021-02-10T01:08:40.000Z">
<meta property="article:modified_time" content="2023-05-10T02:04:02.479Z">
<meta property="article:author" content="阳光与鲜花">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2021/02/10/Mybatis/%E9%98%B3%E5%85%89%E4%B8%8E%E9%B2%9C%E8%8A%B1/source_posts/Mybatis/image-20230425182031191-16836842176431.png">


<link rel="canonical" href="http://example.com/2021/02/10/Mybatis/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2021/02/10/Mybatis/","path":"2021/02/10/Mybatis/","title":"Mybatis"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Mybatis | JavaWorld</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">JavaWorld</p>
      <i class="logo-line"></i>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AF%BE%E7%A8%8B%E4%BB%8B%E7%BB%8D"><span class="nav-number">1.</span> <span class="nav-text">课程介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E4%B8%BB%E8%A6%81%E5%86%85%E5%AE%B9"><span class="nav-number">1.1.</span> <span class="nav-text">1 主要内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E8%AF%BE%E7%A8%8B%E7%9B%AE%E7%9A%84"><span class="nav-number">1.2.</span> <span class="nav-text">2 课程目的</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E4%B8%89%E5%A4%A7%E6%A1%86%E6%9E%B6SSM"><span class="nav-number">2.</span> <span class="nav-text">后端三大框架SSM</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-SSM%E6%A1%86%E6%9E%B6%E8%AF%B4%E6%98%8E"><span class="nav-number">2.1.</span> <span class="nav-text">1 SSM框架说明</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-SpringBoot"><span class="nav-number">2.2.</span> <span class="nav-text">2 SpringBoot</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E8%83%8C%E6%99%AF%E5%88%86%E6%9E%90"><span class="nav-number">2.2.1.</span> <span class="nav-text">2.1 背景分析</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-SpringBoot%E7%AE%80%E8%BF%B0"><span class="nav-number">2.2.2.</span> <span class="nav-text">2.2 SpringBoot简述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-SpringBoot%E6%A0%B8%E5%BF%83%E7%89%B9%E6%80%A7"><span class="nav-number">2.2.3.</span> <span class="nav-text">2.3 SpringBoot核心特性</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E5%88%9B%E5%BB%BASpringBoot%E5%B7%A5%E7%A8%8B"><span class="nav-number">2.3.</span> <span class="nav-text">3 创建SpringBoot工程</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#3-1-%E5%88%9B%E5%BB%BASpringBoot%E5%B7%A5%E7%A8%8B"><span class="nav-number">2.3.1.</span> <span class="nav-text">3.1 创建SpringBoot工程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-2-%E5%88%9B%E5%BB%BA%E5%B7%A5%E7%A8%8B%E5%A4%B1%E8%B4%A5%E6%8E%92%E6%9F%A5"><span class="nav-number">2.3.2.</span> <span class="nav-text">3.2 创建工程失败排查</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis%E6%A1%86%E6%9E%B6-%E6%B3%A8%E8%A7%A3%E7%AE%A1%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">MyBatis框架-注解管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E6%A6%82%E8%BF%B0"><span class="nav-number">3.1.</span> <span class="nav-text">1 概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">3.2.</span> <span class="nav-text">2 数据初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E6%A6%82%E8%BF%B0"><span class="nav-number">3.2.1.</span> <span class="nav-text">2.1 概述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E6%95%B0%E6%8D%AE%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">3.2.2.</span> <span class="nav-text">2.2 数据初始化</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-MyBatis%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">3.3.</span> <span class="nav-text">3 MyBatis环境初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E6%95%B4%E5%90%88MyBatis%E5%88%9D%E6%AD%A5%E5%88%86%E6%9E%90"><span class="nav-number">3.4.</span> <span class="nav-text">4 整合MyBatis初步分析</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%95%B4%E5%90%88MyBatis%E5%AE%8C%E6%88%90%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C"><span class="nav-number">3.5.</span> <span class="nav-text">5 整合MyBatis完成用户数据操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.5.1.</span> <span class="nav-text">5.1 知识点设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-%E7%94%A8%E6%88%B7%E8%A1%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.5.2.</span> <span class="nav-text">5.2 用户表设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-Pojo%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.5.3.</span> <span class="nav-text">5.3 Pojo对象设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.5.4.</span> <span class="nav-text">5.4 Dao接口设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-5-Dao%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%AE%9E%E7%8E%B0"><span class="nav-number">3.5.5.</span> <span class="nav-text">5.5 Dao单元测试实现</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E6%95%B4%E5%90%88MyBatis%E5%AE%8C%E6%88%90%E6%A0%87%E7%AD%BE%E4%B8%9A%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">3.6.</span> <span class="nav-text">6 整合MyBatis完成标签业务操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0"><span class="nav-number">3.6.1.</span> <span class="nav-text">6.1 业务描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.6.2.</span> <span class="nav-text">6.2 知识点设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-weibo%E8%A1%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.6.3.</span> <span class="nav-text">6.3 weibo表设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-4-Pojo%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.6.4.</span> <span class="nav-text">6.4 Pojo对象设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-5-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.6.5.</span> <span class="nav-text">6.5 Dao接口设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-6-Dao%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%AE%9E%E7%8E%B0"><span class="nav-number">3.6.6.</span> <span class="nav-text">6.6 Dao单元测试实现</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E6%95%B4%E5%90%88MyBatis%E5%AE%8C%E6%88%90%E8%AF%84%E8%AE%BA%E4%B8%9A%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">3.7.</span> <span class="nav-text">7 整合MyBatis完成评论业务操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.7.1.</span> <span class="nav-text">7.1 知识点设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-%E8%AF%84%E8%AE%BA%E8%A1%A8%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.7.2.</span> <span class="nav-text">7.3 评论表设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-4-Pojo%E5%AF%B9%E8%B1%A1%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.7.3.</span> <span class="nav-text">7.4 Pojo对象设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-5-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">3.7.4.</span> <span class="nav-text">7.5 Dao接口设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-6-Dao%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%E5%AE%9E%E7%8E%B0"><span class="nav-number">3.7.5.</span> <span class="nav-text">7.6 Dao单元测试实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MyBatis%E6%A1%86%E6%9E%B6-xml%E7%AE%A1%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">MyBatis框架-xml管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-xml%E4%B8%8E%E6%B3%A8%E8%A7%A3%E6%AF%94%E8%BE%83"><span class="nav-number">4.1.</span> <span class="nav-text">1 xml与注解比较</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-1-xml%E5%AE%9A%E4%B9%89"><span class="nav-number">4.1.1.</span> <span class="nav-text">1.1 xml定义</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-2-%E5%92%8CSQL%E6%B3%A8%E8%A7%A3%E6%AF%94%E8%BE%83"><span class="nav-number">4.1.2.</span> <span class="nav-text">1.2 和SQL注解比较</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E7%8E%AF%E5%A2%83%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-number">4.2.</span> <span class="nav-text">2 环境初始化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#2-1-%E5%AD%90%E5%B7%A5%E7%A8%8B%E4%BF%A1%E6%81%AF"><span class="nav-number">4.2.1.</span> <span class="nav-text">2.1 子工程信息</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-2-%E9%85%8D%E7%BD%AE%E6%95%B0%E6%8D%AE%E5%BA%93%E8%BF%9E%E6%8E%A5"><span class="nav-number">4.2.2.</span> <span class="nav-text">2.2 配置数据库连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-3-pojo%E5%AF%B9%E8%B1%A1%E5%8F%8Amapper%E6%8E%A5%E5%8F%A3%E5%87%86%E5%A4%87"><span class="nav-number">4.2.3.</span> <span class="nav-text">2.3 pojo对象及mapper接口准备</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E4%BD%BF%E7%94%A8%E6%B5%81%E7%A8%8B"><span class="nav-number">4.3.</span> <span class="nav-text">3 使用流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-xml%E9%85%8D%E7%BD%AESQL%E6%A0%87%E7%AD%BE"><span class="nav-number">4.4.</span> <span class="nav-text">4 xml配置SQL标签</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E6%95%B4%E5%90%88MyBatis%E5%AE%8C%E6%88%90%E7%94%A8%E6%88%B7%E6%95%B0%E6%8D%AE%E6%93%8D%E4%BD%9C-1"><span class="nav-number">4.5.</span> <span class="nav-text">5 整合MyBatis完成用户数据操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#5-1-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%AE%BE%E8%AE%A1-1"><span class="nav-number">4.5.1.</span> <span class="nav-text">5.1 知识点设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-2-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.5.2.</span> <span class="nav-text">5.2 Dao接口设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-3-%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6UserMapper-xml"><span class="nav-number">4.5.3.</span> <span class="nav-text">5.3 定义映射文件UserMapper.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#5-4-Dao%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">4.5.4.</span> <span class="nav-text">5.4 Dao接口单元测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-%E6%95%B4%E5%90%88MyBatis%E5%AE%8C%E6%88%90%E6%A0%87%E7%AD%BE%E4%B8%9A%E5%8A%A1%E6%93%8D%E4%BD%9C-1"><span class="nav-number">4.6.</span> <span class="nav-text">6 整合MyBatis完成标签业务操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0-1"><span class="nav-number">4.6.1.</span> <span class="nav-text">6.1 业务描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.6.2.</span> <span class="nav-text">6.2 Dao接口设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6UserMapper-xml"><span class="nav-number">4.6.3.</span> <span class="nav-text">6.3 定义映射文件UserMapper.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-4-Dao%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">4.6.4.</span> <span class="nav-text">6.4 Dao接口单元测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-%E6%95%B4%E5%90%88MyBatis%E5%AE%8C%E6%88%90%E6%A0%87%E7%AD%BE%E4%B8%9A%E5%8A%A1%E6%93%8D%E4%BD%9C"><span class="nav-number">4.7.</span> <span class="nav-text">7 整合MyBatis完成标签业务操作</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-1-%E4%B8%9A%E5%8A%A1%E6%8F%8F%E8%BF%B0"><span class="nav-number">4.7.1.</span> <span class="nav-text">7.1 业务描述</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.7.2.</span> <span class="nav-text">7.2 Dao接口设计</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6UserMapper-xml"><span class="nav-number">4.7.3.</span> <span class="nav-text">7.3 定义映射文件UserMapper.xml</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-4-Dao%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">4.7.4.</span> <span class="nav-text">7.4 Dao接口单元测试</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%8A%A8%E6%80%81SQL%E8%AF%AD%E5%8F%A5"><span class="nav-number">4.8.</span> <span class="nav-text">8 动态SQL语句</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-%E5%8A%A8%E6%80%81%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="nav-number">4.8.1.</span> <span class="nav-text">8.1 动态删除数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-1-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.8.1.1.</span> <span class="nav-text">8.1.1 Dao接口设计</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-2-%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6UserMapper-xml"><span class="nav-number">4.8.1.2.</span> <span class="nav-text">8.1.2 定义映射文件UserMapper.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-3-Dao%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">4.8.1.3.</span> <span class="nav-text">8.1.3 Dao接口单元测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2-%E5%8A%A8%E6%80%81%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="nav-number">4.8.2.</span> <span class="nav-text">8.2 动态修改数据</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-1-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1-1"><span class="nav-number">4.8.2.1.</span> <span class="nav-text">8.1.1 Dao接口设计</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-2-%E5%AE%9A%E4%B9%89%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6UserMapper-xml-1"><span class="nav-number">4.8.2.2.</span> <span class="nav-text">8.1.2 定义映射文件UserMapper.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-1-3-Dao%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95-1"><span class="nav-number">4.8.2.3.</span> <span class="nav-text">8.1.3 Dao接口单元测试</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-3-%E7%BB%9F%E8%AE%A1%E6%95%B0%E6%8D%AE%E6%9D%A1%E6%95%B0"><span class="nav-number">4.8.3.</span> <span class="nav-text">8.3 统计数据条数</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#8-3-1-Dao%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"><span class="nav-number">4.8.3.1.</span> <span class="nav-text">8.3.1 Dao接口设计</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-3-2-%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6CommentMapper-xml"><span class="nav-number">4.8.3.2.</span> <span class="nav-text">8.3.2 映射文件CommentMapper.xml</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#8-3-3-Dao%E6%8E%A5%E5%8F%A3%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95"><span class="nav-number">4.8.3.3.</span> <span class="nav-text">8.3.3 Dao接口单元测试</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-SQL%E8%AF%AD%E5%8F%A5%E9%87%8D%E7%94%A8"><span class="nav-number">4.9.</span> <span class="nav-text">9 SQL语句重用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-1-%E8%AF%B4%E6%98%8E"><span class="nav-number">4.9.1.</span> <span class="nav-text">6.1 说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-2-%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.9.2.</span> <span class="nav-text">6.2 实现</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-3-%E7%A4%BA%E4%BE%8B"><span class="nav-number">4.9.3.</span> <span class="nav-text">6.3 示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-%E8%AE%A2%E5%8D%95%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%BB%83%E4%B9%A0"><span class="nav-number">4.10.</span> <span class="nav-text">10 订单管理系统练习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#10-1-%E5%B7%A5%E7%A8%8B%E5%87%86%E5%A4%87"><span class="nav-number">4.10.1.</span> <span class="nav-text">10.1 工程准备</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-2-%E8%A6%81%E6%B1%82"><span class="nav-number">4.10.2.</span> <span class="nav-text">7.2 要求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-3-%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.10.3.</span> <span class="nav-text">7.3 实现</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#7-3-1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">4.10.3.1.</span> <span class="nav-text">7.3.1 准备工作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#7-3-2-%E6%93%8D%E4%BD%9C%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.10.3.2.</span> <span class="nav-text">7.3.2 操作实现</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-%E5%88%86%E7%B1%BB%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E7%BB%83%E4%B9%A0"><span class="nav-number">4.11.</span> <span class="nav-text">11 分类管理系统练习</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-%E8%A6%81%E6%B1%82"><span class="nav-number">4.11.1.</span> <span class="nav-text">8.1 要求</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#11-2-%E5%AE%9E%E7%8E%B0%E6%AD%A5%E9%AA%A4"><span class="nav-number">4.11.2.</span> <span class="nav-text">11.2 实现步骤</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-1-%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="nav-number">4.11.2.1.</span> <span class="nav-text">11.2.1 准备工作</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#11-2-2-%E6%93%8D%E4%BD%9C%E5%AE%9E%E7%8E%B0"><span class="nav-number">4.11.2.2.</span> <span class="nav-text">11.2.2 操作实现</span></a></li></ol></li></ol></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="阳光与鲜花"
      src="/images/3.gif">
  <p class="site-author-name" itemprop="name">阳光与鲜花</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/SunshineAndFlowers" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;SunshineAndFlowers" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/162021441@qq.com" title="E-Mail → 162021441@qq.com" rel="noopener me"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://weibo.com/yourname" title="Weibo → https:&#x2F;&#x2F;weibo.com&#x2F;yourname" rel="noopener me" target="_blank"><i class="fab fa-weibo fa-fw"></i>Weibo</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://twitter.com/yourname" title="Twitter → https:&#x2F;&#x2F;twitter.com&#x2F;yourname" rel="noopener me" target="_blank"><i class="fab fa-twitter fa-fw"></i>Twitter</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.facebook.com/yourname" title="FB Page → https:&#x2F;&#x2F;www.facebook.com&#x2F;yourname" rel="noopener me" target="_blank"><i class="fab fa-facebook fa-fw"></i>FB Page</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://stackoverflow.com/yourname" title="StackOverflow → https:&#x2F;&#x2F;stackoverflow.com&#x2F;yourname" rel="noopener me" target="_blank"><i class="fab fa-stack-overflow fa-fw"></i>StackOverflow</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://youtube.com/yourname" title="YouTube → https:&#x2F;&#x2F;youtube.com&#x2F;yourname" rel="noopener me" target="_blank"><i class="fab fa-youtube fa-fw"></i>YouTube</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://instagram.com/yourname" title="Instagram → https:&#x2F;&#x2F;instagram.com&#x2F;yourname" rel="noopener me" target="_blank"><i class="fab fa-instagram fa-fw"></i>Instagram</a>
      </span>
      <span class="links-of-author-item">
        <a href="skype:yourname?call|chat" title="Skype → skype:yourname?call|chat" rel="noopener me" target="_blank"><i class="fab fa-skype fa-fw"></i>Skype</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/02/10/Mybatis/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/3.gif">
      <meta itemprop="name" content="阳光与鲜花">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="JavaWorld">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Mybatis | JavaWorld">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Mybatis
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-02-10 09:08:40" itemprop="dateCreated datePublished" datetime="2021-02-10T09:08:40+08:00">2021-02-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-10 10:04:02" itemprop="dateModified" datetime="2023-05-10T10:04:02+08:00">2023-05-10</time>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>[toc]</p>
<h2 id="课程介绍"><a href="#课程介绍" class="headerlink" title="课程介绍"></a>课程介绍</h2><h3 id="1-主要内容"><a href="#1-主要内容" class="headerlink" title="1 主要内容"></a>1 主要内容</h3><ul>
<li>SpringBoot</li>
<li>Spring MVC</li>
<li>MyBatis</li>
</ul>
<h3 id="2-课程目的"><a href="#2-课程目的" class="headerlink" title="2 课程目的"></a>2 课程目的</h3><p>​	实现网站开发后端功能</p>
<h2 id="后端三大框架SSM"><a href="#后端三大框架SSM" class="headerlink" title="后端三大框架SSM"></a>后端三大框架SSM</h2><h3 id="1-SSM框架说明"><a href="#1-SSM框架说明" class="headerlink" title="1 SSM框架说明"></a>1 SSM框架说明</h3><ul>
<li><p>Spring</p>
<p>​		Spring是一个轻量级的容器和框架，为开发者提供了一个IoC容器和AOP框架，Spring框架包含很多核心子项目。</p>
</li>
<li><p>Spring MVC</p>
<p>​		SpringMVC是Spring框架的一个核心子项目，是一个基于MVC设计模式的Web框架，它提供了一系列功能，使得开发者能够快速开发灵活、易于维护的Web应用程序。</p>
</li>
<li><p>MyBatis</p>
<p>​		MyBatis是基于 Java 的持久层框架，用于和数据库映射，MyBatis避免了几乎所有的JDBC代码和手动设置参数以及获取结果集的工作。MyBatis通过XML或注解的方式来配置SQL和映射关系，灵活性非常高。</p>
</li>
</ul>
<h3 id="2-SpringBoot"><a href="#2-SpringBoot" class="headerlink" title="2 SpringBoot"></a>2 SpringBoot</h3><h4 id="2-1-背景分析"><a href="#2-1-背景分析" class="headerlink" title="2.1 背景分析"></a>2.1 背景分析</h4><p>​		在传统JAVAEE应用体系中创建一个项目,需要手动添加大量的依赖，还要考虑版本的兼容性，还有繁重的配置、负载的项目部署，会高度影响开发效率，即使是使用Spring进行资源整合，也存在同样的这些问题。</p>
<p>​		还有就是现在的软件生态应用也已经形成一定的规模，整个软件架构体系在变化，企业对技术的要求也在变化，现在的企业更注重技术的开箱即用，更注重技术在生态圈中的深度融合，更注重轻量级的运维。由此由此spring boot诞生。</p>
<h4 id="2-2-SpringBoot简述"><a href="#2-2-SpringBoot简述" class="headerlink" title="2.2 SpringBoot简述"></a>2.2 SpringBoot简述</h4><p>​		Spring Boot是一个全新的Java软件开发框架（很多人现在把它理解为一个脚手架），其设计目的是用来简化Spring项目的初始搭建以及开发过程，并为后面的Spring Cloud 微服务实践提供更加便利条件。该框架使用了特定的注解方式来进行配置，从而使开发人员不再需要大量的xml配置。不再需要大量的手动依赖管理。Spring Boot基于快速构建理念，通过约定大于配置，开箱即用的方式，希望能够在蓬勃发展的快速应用开发领域成为其领导者。</p>
<h4 id="2-3-SpringBoot核心特性"><a href="#2-3-SpringBoot核心特性" class="headerlink" title="2.3 SpringBoot核心特性"></a>2.3 SpringBoot核心特性</h4><p>SpringBoot 框架诞生后，之所以能得到软件开发行业的高度认可，自然离不开它提供给我们的一些关键特性，例如：</p>
<ol>
<li>起步依赖(Starter Dependency)-创建项目时，会默认添加基础依赖，简化我们自己查找依赖的过程。</li>
<li>自动配置(Auto Configuration)-创建项目时，springboot工程添加的默认依赖中提供了很多默认的配置，简化了我们对资源的配置过程。</li>
<li>嵌入式服务(Tomcat,Jetty)-springboot工程支持内嵌的web服务，可以将tomcat这样的服务直接嵌套到web依赖中，简化部署过程。</li>
</ol>
<h3 id="3-创建SpringBoot工程"><a href="#3-创建SpringBoot工程" class="headerlink" title="3 创建SpringBoot工程"></a>3 创建SpringBoot工程</h3><h4 id="3-1-创建SpringBoot工程"><a href="#3-1-创建SpringBoot工程" class="headerlink" title="3.1 创建SpringBoot工程"></a>3.1 创建SpringBoot工程</h4><ol>
<li><p>创建工程jsd2303-springmvc</p>
<ul>
<li><p>创建SpringBoot工程时需要将地址改为：<a target="_blank" rel="noopener" href="https://start.spring.io/">https://start.spring.io</a>  <a target="_blank" rel="noopener" href="https://start.springboot.io/">https://start.springboot.io</a> </p>
</li>
<li><p>Alt + Insert –&gt; Module –&gt; Spring Initalizr</p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\image-20230425182031191-16836842176431.png" alt="image-20230425182031191"></p>
</li>
</ul>
</li>
<li><p>在第二个页面选择 Web - Spring Web，<strong>Spring Boot版本为2.7.11</strong>，然后点击Finish</p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\image-20230425182151532-16836842176442.png" alt="image-20230425182151532"></p>
</li>
<li><p>删除src目录，本工程为聚合项目</p>
</li>
<li><p>pom.xml解析</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span> <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-parent<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.7.11<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">relativePath</span>/&gt;</span> <span class="comment">&lt;!-- lookup parent from repository --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>cn.tedu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsd2303-springmvc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>0.0.1-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>jsd2303-springmvc<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>Demo project for Spring Boot<span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">java.version</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">java.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!---定义当前工程以及子工程所需要的依赖，重点是可以子工程直接使用--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--基于maven的编译插件对项目编译环境进行统一设置。--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="3-2-创建工程失败排查"><a href="#3-2-创建工程失败排查" class="headerlink" title="3.2 创建工程失败排查"></a>3.2 创建工程失败排查</h4><ul>
<li>创建完工程后，查看Build页卡中是否显示了绿色的对钩</li>
</ul>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\image-20230421092823099-16836842176443.png" alt="image-20230421092823099"></p>
<ul>
<li><p>如果没有显示绿色对钩而是红色报错，解决方案如下</p>
<ul>
<li><p>检查maven配置</p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\image-20230420184116832-16836842176444.png" alt="image-20230420184116832"></p>
</li>
<li><p>刷新maven</p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\image-20230421093025690-16836842176446.png" alt="image-20230421093025690"></p>
</li>
<li><p>如果刷新之后还没有成功</p>
<ol>
<li>检查Maven配置是否正确，检查 .m2 目录下是否包含 settings.xml 文件</li>
<li>如果Maven配置没有问题，删除 .m2 目录下的 repository目录，然后再次刷新Maven</li>
<li>如果以上步骤还是不成功，创建一个新工程重试</li>
</ol>
</li>
</ul>
</li>
</ul>
<h2 id="MyBatis框架-注解管理"><a href="#MyBatis框架-注解管理" class="headerlink" title="MyBatis框架-注解管理"></a>MyBatis框架-注解管理</h2><h3 id="1-概述"><a href="#1-概述" class="headerlink" title="1 概述"></a>1 概述</h3><p>​		Mybatis是一个优秀的持久层框架（官网<a target="_blank" rel="noopener" href="https://mybatis.org/mybatis-3/%EF%BC%89%EF%BC%8C%E5%BA%95%E5%B1%82%E5%9F%BA%E4%BA%8EJDBC%E5%AE%9E%E7%8E%B0%E4%B8%8E%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E4%BA%A4%E4%BA%92%E3%80%82%E5%B9%B6%E5%9C%A8JDBC%E6%93%8D%E4%BD%9C%E7%9A%84%E5%9F%BA%E7%A1%80%E4%B8%8A%E5%81%9A%E4%BA%86%E5%B0%81%E8%A3%85%E5%92%8C%E4%BC%98%E5%8C%96%EF%BC%8C%E5%AE%83%E5%80%9F%E5%8A%A9%E7%81%B5%E6%B4%BB%E7%9A%84SQL%E5%AE%9A%E5%88%B6%EF%BC%8C%E5%8F%82%E6%95%B0%E5%8F%8A%E7%BB%93%E6%9E%9C%E9%9B%86%E7%9A%84%E6%98%A0%E5%B0%84%E6%96%B9%E5%BC%8F%EF%BC%8C%E6%9B%B4%E5%A5%BD%E7%9A%84%E9%80%82%E5%BA%94%E4%BA%86%E5%BD%93%E5%89%8D%E4%BA%92%E8%81%94%E7%BD%91%E6%8A%80%E6%9C%AF%E7%9A%84%E5%8F%91%E5%B1%95%E3%80%82Mybatis%E6%A1%86%E6%9E%B6%E7%9A%84%E7%AE%80%E5%8D%95%E5%BA%94%E7%94%A8%E6%9E%B6%E6%9E%84%EF%BC%8C%E5%A6%82%E5%9B%BE%E6%89%80%E7%A4%BA%EF%BC%9A">https://mybatis.org/mybatis-3/），底层基于JDBC实现与数据库的交互。并在JDBC操作的基础上做了封装和优化，它借助灵活的SQL定制，参数及结果集的映射方式，更好的适应了当前互联网技术的发展。Mybatis框架的简单应用架构，如图所示：</a></p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\mybatis-16836842176445.png"></p>
<p>​		</p>
<p>​		在当今的互联网应用中项目，mybatis框架通常会由spring家族进行资源整合，作为数据层技术实现数据交互操作。使用此框架程序员只需要通过注解或者修改xml配置文件的方式配置好需要执行的SQL语句，MyBatis框架会根据SQL语句生成对应的JDBC代码并对数据库中数据进行增删改查操作。</p>
<h3 id="2-数据初始化"><a href="#2-数据初始化" class="headerlink" title="2 数据初始化"></a>2 数据初始化</h3><h4 id="2-1-概述"><a href="#2-1-概述" class="headerlink" title="2.1 概述"></a>2.1 概述</h4><p>​		该项目是一款社交媒体应用，用户可以在平台上发表短文等信息，分享自己的想法、心情和生活。共设计3张表。</p>
<h4 id="2-2-数据初始化"><a href="#2-2-数据初始化" class="headerlink" title="2.2 数据初始化"></a>2.2 数据初始化</h4><ul>
<li><p>数据表说明</p>
<ul>
<li><p>用户表user：存储微博用户信息；</p>
</li>
<li><p>微博表weibo：存储用户所发布的微博信息内容；</p>
</li>
<li><p>评论表comment：存储每条微博的所有评论。</p>
</li>
</ul>
</li>
<li><p>表关系说明</p>
<ul>
<li>用户表和微博表：一对多，一个用户可以发布多条微博，一条微博只能归属于一个用户；</li>
<li>用户表和评论表：一对多，一个用户可以发布多条评论，一条评论只能归属于一个用户；</li>
<li>微博表和评论表：一对多，一条微博下可以有多条评论，一条评论只能归于与一条微博。</li>
</ul>
</li>
<li><p>初始化数据表</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">DROP DATABASE IF EXISTS blog;</span><br><span class="line">CREATE DATABASE blog;</span><br><span class="line">USE blog;</span><br><span class="line">CREATE TABLE user(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    username VARCHAR(50),</span><br><span class="line">    password VARCHAR(50),</span><br><span class="line">    nickname VARCHAR(50),</span><br><span class="line">    created TIMESTAMP</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE weibo(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	content VARCHAR(255),</span><br><span class="line">    created TIMESTAMP,</span><br><span class="line">    user_id INT</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">CREATE TABLE comment(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    content VARCHAR(255),</span><br><span class="line">    created TIMESTAMP,</span><br><span class="line">    user_id INT,</span><br><span class="line">    weibo_id INT</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="3-MyBatis环境初始化"><a href="#3-MyBatis环境初始化" class="headerlink" title="3 MyBatis环境初始化"></a>3 MyBatis环境初始化</h3><p><strong>创建子工程mybatisannotation</strong></p>
<ul>
<li><p>工程名：mybatis 选择Java 8版本</p>
</li>
<li><p>SpringBoot版本：2.7.11</p>
</li>
<li><p>勾选3项依赖项</p>
<ul>
<li><p>Srping Web</p>
</li>
<li><p>MyBatis Framework</p>
</li>
<li><p>MySQL Driver</p>
</li>
</ul>
</li>
</ul>
<h3 id="4-整合MyBatis初步分析"><a href="#4-整合MyBatis初步分析" class="headerlink" title="4 整合MyBatis初步分析"></a>4 整合MyBatis初步分析</h3><ul>
<li><p><strong>application.properties配置文件中添加连接数据库信息</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/blog?serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>测试代码实现</strong></p>
<p>在src&#x2F;test&#x2F;java&#x2F;cn.tedu.mybatis&#x2F;MyBatisApplicationTests中添加测试方法，对mybatis框架整合进行基本测试，代码如下</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.jupiter.api.Test;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.test.context.SpringBootTest;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"></span><br><span class="line"><span class="meta">@SpringBootTest</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">MybatisApplicationTests</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 自动装配</span></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> SqlSession sqlSession;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 测试数据库连接</span></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">contextLoads</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> sqlSession.getConnection();</span><br><span class="line">        System.out.println(<span class="string">&quot;connection=&quot;</span>+conn);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>​		在SpringBoot脚手架工程中，Spring框架会基于MyBatis框架底层配置，创建SqlSessionFactory对象，然后再通过此工厂对象创建SqlSession，最后基于Spring框架为测试类注入SqlSession对象，接下来，我们可以通过SqlSession对象实现与数据库的会话了。如图所示：</p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\SqlSession-16836842176447.png"></p>
<h3 id="5-整合MyBatis完成用户数据操作"><a href="#5-整合MyBatis完成用户数据操作" class="headerlink" title="5 整合MyBatis完成用户数据操作"></a>5 整合MyBatis完成用户数据操作</h3><h4 id="5-1-知识点设计"><a href="#5-1-知识点设计" class="headerlink" title="5.1 知识点设计"></a>5.1 知识点设计</h4><p>基于本业务实现MyBatis基本操作，掌握MyBatis中xml配置SQL的应用。</p>
<h4 id="5-2-用户表设计"><a href="#5-2-用户表设计" class="headerlink" title="5.2 用户表设计"></a>5.2 用户表设计</h4><p>用户表的设计如下(假如库中已经存在这个表了，不需要再创建了)，例如：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">USE blog;</span><br><span class="line">CREATE TABLE user(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    username VARCHAR(50),</span><br><span class="line">    password VARCHAR(50),</span><br><span class="line">    nickname VARCHAR(50),</span><br><span class="line">    created TIMESTAMP</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="5-3-Pojo对象设计"><a href="#5-3-Pojo对象设计" class="headerlink" title="5.3 Pojo对象设计"></a>5.3 Pojo对象设计</h4><p>在工程目录中创建pojo包，并创建User类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatis.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line">    <span class="keyword">private</span> String nickname;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getNickname</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> nickname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setNickname</span><span class="params">(String nickname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.nickname = nickname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getCreated</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> created;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreated</span><span class="params">(Date created)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.created = created;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, nickname=&#x27;&quot;</span> + nickname + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, created=&quot;</span> + created +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="5-4-Dao接口设计"><a href="#5-4-Dao接口设计" class="headerlink" title="5.4 Dao接口设计"></a>5.4 Dao接口设计</h4><p>基于MyBatis规范设计用户数据访问接口，在工程目录下创建包mapper，并创建UserMapper<strong>接口</strong></p>
<ul>
<li><p>@Mapper注解</p>
<p>是由MyBatis框架提供，用于描述数据层接口，告诉系统底层为此接口创建其实现类，在实现类中定义数据访问逻辑，执行与数据库的会话(交互)</p>
</li>
<li><p>@Insert注解</p>
<p>使 MyBatis 框架根据接口方法的返回值和参数类型自动生成插入数据的代码。</p>
</li>
<li><p>占位符 <code>#&#123;&#125;</code></p>
<p><code>#&#123;&#125;</code> 是 MyBatis 框架中用来表示占位符的语法。</p>
<p>在 <code>@Insert</code> 注解中，<code>#&#123;&#125; </code>所代表的是一个占位符，它可以接受 Java 对象作为输入参数，并将其转换为预编译的 SQL 语句中的参数。使用 <code>#&#123;&#125; </code>可以帮助我们避免 SQL 注入等问题，同时也方便了参数的类型转换，让 SQL 写起来更加简单。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**在User表中插入一条表记录*/</span></span><br><span class="line">    <span class="meta">@Insert(&quot;INSERT INTO user VALUES(NULL,#&#123;username&#125;,#&#123;password&#125;,#&#123;nickname&#125;,#&#123;created&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-5-Dao单元测试实现"><a href="#5-5-Dao单元测试实现" class="headerlink" title="5.5 Dao单元测试实现"></a>5.5 Dao单元测试实现</h4><p>新建测试方法进行测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.自动装配</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.测试插入数据</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setUsername(<span class="string">&quot;熊二&quot;</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    user.setNickName(<span class="string">&quot;很可爱&quot;</span>);</span><br><span class="line">    user.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    <span class="comment">// 调用接口方法</span></span><br><span class="line">    System.out.println(userMapper.insert(user));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="6-整合MyBatis完成标签业务操作"><a href="#6-整合MyBatis完成标签业务操作" class="headerlink" title="6 整合MyBatis完成标签业务操作"></a>6 整合MyBatis完成标签业务操作</h3><h4 id="6-1-业务描述"><a href="#6-1-业务描述" class="headerlink" title="6.1 业务描述"></a>6.1 业务描述</h4><p>基于SpringBoot脚手架工程对MyBatis框架的整合，实现对微博内容weibo表进行操作。</p>
<h4 id="6-2-知识点设计"><a href="#6-2-知识点设计" class="headerlink" title="6.2 知识点设计"></a>6.2 知识点设计</h4><p>本业务中重点讲解@Select,@Insert,@Update,@Delete注解应用。</p>
<h4 id="6-3-weibo表设计"><a href="#6-3-weibo表设计" class="headerlink" title="6.3 weibo表设计"></a>6.3 weibo表设计</h4><p>标签表设计如下(这个表已经存在则无虚创建)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE weibo(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	content VARCHAR(255),</span><br><span class="line">    created TIMESTAMP,</span><br><span class="line">    user_id INT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="6-4-Pojo对象设计"><a href="#6-4-Pojo对象设计" class="headerlink" title="6.4 Pojo对象设计"></a>6.4 Pojo对象设计</h4><p>在popo下创建<strong>Weibo</strong>类，用于和数据库中weibo做映射</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatis.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Weibo</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Date Created;</span><br><span class="line">    <span class="keyword">private</span> Integer UserId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getCreated</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Created;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreated</span><span class="params">(Date created)</span> &#123;</span><br><span class="line">        Created = created;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> UserId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserId</span><span class="params">(Integer userId)</span> &#123;</span><br><span class="line">        UserId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Weibo&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, content=&#x27;&quot;</span> + content + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, Created=&quot;</span> + Created +</span><br><span class="line">                <span class="string">&quot;, UserId=&quot;</span> + UserId +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-5-Dao接口设计"><a href="#6-5-Dao接口设计" class="headerlink" title="6.5 Dao接口设计"></a>6.5 Dao接口设计</h4><p>在mapper先新建WeiboMapper<strong>接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatis.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.tedu.mybatis.pojo.Weibo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">WeiboMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**在微博表中插入数据*/</span></span><br><span class="line">    <span class="meta">@Insert(&quot;INSERT INTO weibo VALUES(NULL,#&#123;content&#125;,#&#123;created&#125;,#&#123;userId&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Weibo weibo)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**查询所有微博信息*/</span></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM weibo&quot;)</span></span><br><span class="line">    List&lt;Weibo&gt; <span class="title function_">selectWeibo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**根据微博id查询数据*/</span></span><br><span class="line">    <span class="meta">@Select(&quot;SELECT * FROM weibo WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    Weibo <span class="title function_">selectByWeiboId</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**更新微博表数据*/</span></span><br><span class="line">    <span class="meta">@Update(&quot;UPDATE weibo SET content=#&#123;content&#125;,created=#&#123;created&#125;,user_id=#&#123;userId&#125; WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateById</span><span class="params">(Weibo weibo)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**删除微博表数据*/</span></span><br><span class="line">    <span class="meta">@Delete(&quot;DELETE FROM weibo WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-6-Dao单元测试实现"><a href="#6-6-Dao单元测试实现" class="headerlink" title="6.6 Dao单元测试实现"></a>6.6 Dao单元测试实现</h4><p>在测试类中新建测试方法进行测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**自动装配*/</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> WeiboMapper weiboMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**在微博表中插入数据-测试方法*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">InsertWeibo</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Weibo</span> <span class="variable">weibo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Weibo</span>();</span><br><span class="line">    weibo.setContent(<span class="string">&quot;今天天气真不错呀&quot;</span>);</span><br><span class="line">    weibo.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    weibo.setUserId(<span class="number">1</span>);</span><br><span class="line">    weiboMapper.insert(weibo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**查询所有微博信息-测试方法*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectWeiboTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(weiboMapper.selectWeibo());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**根据微博id查询数据*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectByWeiboIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(weiboMapper.selectByWeiboId(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**更新微博表数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Weibo</span> <span class="variable">weibo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Weibo</span>();</span><br><span class="line">    weibo.setId(<span class="number">1</span>);</span><br><span class="line">    weibo.setContent(<span class="string">&quot;这是我修改后的微博&quot;</span>);</span><br><span class="line">    weibo.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    weibo.setUserId(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(weiboMapper.updateById(weibo));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**删除微博表数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteByIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(weiboMapper.deleteById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注：insert、update、delete返回值为受影响的数据条数int。</p>
<h3 id="7-整合MyBatis完成评论业务操作"><a href="#7-整合MyBatis完成评论业务操作" class="headerlink" title="7 整合MyBatis完成评论业务操作"></a>7 整合MyBatis完成评论业务操作</h3><h4 id="7-1-知识点设计"><a href="#7-1-知识点设计" class="headerlink" title="7.1 知识点设计"></a>7.1 知识点设计</h4><p>本业务中重点讲解@Param注解的使用。</p>
<p><code>@Param</code>用于指定参数名和参数值。在使用 MyBatis 进行 SQL 语句开发时，我们可以使用 <code>@Param</code> 注解将方法参数映射到 SQL 语句中需要的占位符上，这样做的好处是可以清晰地表达 SQL 语句中占位符的含义，更容易使用和维护 SQL 语句。</p>
<h4 id="7-3-评论表设计"><a href="#7-3-评论表设计" class="headerlink" title="7.3 评论表设计"></a>7.3 评论表设计</h4><p>评论表的设计如下(假如表已经存在则无需创建)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE comment(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    content VARCHAR(255),</span><br><span class="line">    created TIMESTAMP,</span><br><span class="line">    user_id INT,</span><br><span class="line">    weibo_id INT</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="7-4-Pojo对象设计"><a href="#7-4-Pojo对象设计" class="headerlink" title="7.4 Pojo对象设计"></a>7.4 Pojo对象设计</h4><p><strong>在pojo下新建Comment类，实现和评论表的映射关系</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatis.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Date;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Comment</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String content;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    <span class="keyword">private</span> Integer userId;</span><br><span class="line">    <span class="keyword">private</span> Integer weiboId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Integer id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getContent</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setContent</span><span class="params">(String content)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.content = content;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Date <span class="title function_">getCreated</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> created;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCreated</span><span class="params">(Date created)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.created = created;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getUserId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserId</span><span class="params">(Integer userId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userId = userId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Integer <span class="title function_">getWeiboId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> weiboId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setWeiboId</span><span class="params">(Integer weiboId)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.weiboId = weiboId;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Comment&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, content=&#x27;&quot;</span> + content + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, created=&quot;</span> + created +</span><br><span class="line">                <span class="string">&quot;, userId=&quot;</span> + userId +</span><br><span class="line">                <span class="string">&quot;, weiboId=&quot;</span> + weiboId +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="7-5-Dao接口设计"><a href="#7-5-Dao接口设计" class="headerlink" title="7.5 Dao接口设计"></a>7.5 Dao接口设计</h4><p><strong>mapper目录下创建CommentMapper接口</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatis.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CommentMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**在评论表中插入数据*/</span></span><br><span class="line">    <span class="meta">@Insert(&quot;INSERT INTO comment(content,user_id,weibo_id) VALUES(#&#123;content&#125;,#&#123;user_id&#125;,#&#123;weibo_id&#125;)&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertComment</span><span class="params">(<span class="meta">@Param(&quot;content&quot;)</span> String content, <span class="meta">@Param(&quot;user_id&quot;)</span> Integer userId, <span class="meta">@Param(&quot;weibo_id&quot;)</span> Integer weiboId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**修改品论数据*/</span></span><br><span class="line">    <span class="meta">@Update(&quot;UPDATE comment SET content=#&#123;content&#125; WHERE id=#&#123;id&#125;&quot;)</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateCommentById</span><span class="params">(<span class="meta">@Param(&quot;content&quot;)</span> String content, <span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-6-Dao单元测试实现"><a href="#7-6-Dao单元测试实现" class="headerlink" title="7.6 Dao单元测试实现"></a>7.6 Dao单元测试实现</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**自动装配*/</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> CommentMapper commentMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**在评论表中插入数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertCommentTest</span><span class="params">()</span>&#123;</span><br><span class="line">    commentMapper.insertComment(<span class="string">&quot;我学习了param注解，真高兴&quot;</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**修改品论数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateCommentByIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(commentMapper.updateCommentById(<span class="string">&quot;这是修改后的评论&quot;</span>, <span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="MyBatis框架-xml管理"><a href="#MyBatis框架-xml管理" class="headerlink" title="MyBatis框架-xml管理"></a>MyBatis框架-xml管理</h2><h3 id="1-xml与注解比较"><a href="#1-xml与注解比较" class="headerlink" title="1 xml与注解比较"></a>1 xml与注解比较</h3><h4 id="1-1-xml定义"><a href="#1-1-xml定义" class="headerlink" title="1.1 xml定义"></a>1.1 xml定义</h4><p>​		XML（Extensible Markup Language）是一种用于存储和传输数据的标记语言。是一种与HTML类似但含义不同的语言。</p>
<p>​		XML是一种可扩展性语言，意味着用户可以自己定义标签，用来描述特定类型的数据。XML的语法严格，每个标签都必须有一个结束标签，标签的嵌套关系也必须合法。</p>
<p>​		XML数据通常用于Web服务的数据交换、配置文件的存储、数据存储等方面，数据结构化很好。</p>
<h4 id="1-2-和SQL注解比较"><a href="#1-2-和SQL注解比较" class="headerlink" title="1.2 和SQL注解比较"></a>1.2 和SQL注解比较</h4><ul>
<li><p>xml配置SQL，支持SQL语句的复用</p>
</li>
<li><p>xml配置SQL，可以将SQL语句和JAVA代码分离开</p>
</li>
<li><p>xml配置SQL，支持动态SQL语句</p>
</li>
</ul>
<h3 id="2-环境初始化"><a href="#2-环境初始化" class="headerlink" title="2 环境初始化"></a>2 环境初始化</h3><p><strong>创建子工程mybatisxml</strong></p>
<h4 id="2-1-子工程信息"><a href="#2-1-子工程信息" class="headerlink" title="2.1 子工程信息"></a>2.1 子工程信息</h4><ul>
<li><p>工程名：mybatis 选择Java 8版本</p>
</li>
<li><p>SpringBoot版本：2.7.11</p>
</li>
<li><p>勾选3项依赖项</p>
<ul>
<li><p>Srping Web</p>
</li>
<li><p>MyBatis Framework</p>
</li>
<li><p>MySQL Driver</p>
</li>
</ul>
</li>
</ul>
<h4 id="2-2-配置数据库连接"><a href="#2-2-配置数据库连接" class="headerlink" title="2.2 配置数据库连接"></a>2.2 配置数据库连接</h4><p><strong>配置文件：application.properties</strong></p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/blog?serverTimezone=Asia/Shanghai&amp;characterEncoding=utf8</span></span><br><span class="line"><span class="attr">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">spring.datasource.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>

<h4 id="2-3-pojo对象及mapper接口准备"><a href="#2-3-pojo对象及mapper接口准备" class="headerlink" title="2.3 pojo对象及mapper接口准备"></a>2.3 pojo对象及mapper接口准备</h4><ol>
<li>将mybatis-annotation中的pojo包和mapper包复制到本工程下，并调整导包路径</li>
<li>将mybatis-annotation中测试类中所有代码复制到本工程下，并调整导包路径</li>
<li>去掉所有Mapper接口的 @Select @Update @Insert @Delete 注解</li>
</ol>
<h3 id="3-使用流程"><a href="#3-使用流程" class="headerlink" title="3 使用流程"></a>3 使用流程</h3><ol>
<li><p>在resources目录下创建 mappers目录，用来存放xml配置文件</p>
</li>
<li><p>在苍老师文档服务器中下载映射文件模板</p>
<p><a target="_blank" rel="noopener" href="http://doc.canglaoshi.org/">http://doc.canglaoshi.org/</a></p>
<p>配置文件下载 - MyBatis Mapper映射文件，下载后解压得到：<strong>someMapper.xml</strong></p>
<p><font color="red"><strong>并将该文件拷贝到resources&#x2F;mappers目录下</strong></font></p>
<p><img src="/2021/02/10/Mybatis/阳光与鲜花\source_posts\Mybatis\image-20230426164536349-16834425743932-16836842176448.png"></p>
</li>
<li><p>application.properties中添加配置：mybatis框架映射配置文件的位置</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置MyBatis框架的映射（Mapper）配置文件的位置</span></span><br><span class="line"><span class="attr">mybatis.mapper-locations</span>=<span class="string">classpath:mappers/*.xml</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="4-xml配置SQL标签"><a href="#4-xml配置SQL标签" class="headerlink" title="4 xml配置SQL标签"></a>4 xml配置SQL标签</h3><ul>
<li><p>说明</p>
<p>在 Mybatis 的 XML 文件中，SQL 语句都是使用 SQL 标签来定义的。</p>
</li>
<li><p>常用的SQL标签</p>
<ul>
<li><p>select</p>
<p>用于查询操作，包括多表查询、条件查询等。可以使用 resultType 来指定返回结果的类型。</p>
</li>
<li><p>insert</p>
<p>用于插入操作，并将其自动注入实体类中。</p>
</li>
<li><p>update</p>
<p>用于更新操作，包括更新一条记录或者批量更新。</p>
</li>
<li><p>delete</p>
<p>用于删除操作，包括删除一条记录或者批量删除。</p>
</li>
<li><p>if、foreach、set</p>
<p>用于条件控制，可以根据不同的条件进行查询、插入、更新和删除操作。if 标签用于指定可以为空的查询条件，foreach 标签用于循环查询，set 标签用于指定更新操作的字段值。</p>
</li>
<li><p>sql：用于定义可重用的 SQL 片段，通常是一些较为复杂的 SQL 片段。可以在其它 SQL 语句中使用 include 标签来引用 SQL 片段。</p>
</li>
<li><p>include：用于引入外部的 SQL 片段。可以在 include 标签的 refid 属性中指定外部 SQL 片段的名字，然后在当前 SQL 中使用它。</p>
</li>
</ul>
<p>​		这些 SQL 标签可以随意组合，可以使 SQL 语句变得很灵活和强大。通常需要根据实际业务场景选择合适的标签来实现相应的 SQL 操作。</p>
</li>
</ul>
<h3 id="5-整合MyBatis完成用户数据操作-1"><a href="#5-整合MyBatis完成用户数据操作-1" class="headerlink" title="5 整合MyBatis完成用户数据操作"></a>5 整合MyBatis完成用户数据操作</h3><h4 id="5-1-知识点设计-1"><a href="#5-1-知识点设计-1" class="headerlink" title="5.1 知识点设计"></a>5.1 知识点设计</h4><p>基于本业务实现MyBatis基本操作，掌握MyBatis中xml配置SQL的应用。</p>
<p><strong>将SomeMapper.xml重命名为UserMapper.xml</strong></p>
<h4 id="5-2-Dao接口设计"><a href="#5-2-Dao接口设计" class="headerlink" title="5.2 Dao接口设计"></a>5.2 Dao接口设计</h4><p><strong>UserMapper.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">UserMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**在User表中插入一条表记录*/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(User user)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="5-3-定义映射文件UserMapper-xml"><a href="#5-3-定义映射文件UserMapper-xml" class="headerlink" title="5.3 定义映射文件UserMapper.xml"></a>5.3 定义映射文件UserMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">  <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">  <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 1.填写namespace，填写UserMapper的绝对路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.tedu.mybatisxml.mapper.UserMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- id的属性值要和UserMapper中定义的方法名一致 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO user VALUES (NULL,#&#123;username&#125;,#&#123;password&#125;,#&#123;nickname&#125;,#&#123;created&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="5-4-Dao接口单元测试"><a href="#5-4-Dao接口单元测试" class="headerlink" title="5.4 Dao接口单元测试"></a>5.4 Dao接口单元测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动装配</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> UserMapper userMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试插入数据</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">testInsert</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">User</span>();</span><br><span class="line">    user.setUsername(<span class="string">&quot;熊三&quot;</span>);</span><br><span class="line">    user.setPassword(<span class="string">&quot;123456&quot;</span>);</span><br><span class="line">    user.setNickname(<span class="string">&quot;只手遮天&quot;</span>);</span><br><span class="line">    user.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    <span class="comment">// 调用接口方法</span></span><br><span class="line">    System.out.println(userMapper.insert(user));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-整合MyBatis完成标签业务操作-1"><a href="#6-整合MyBatis完成标签业务操作-1" class="headerlink" title="6 整合MyBatis完成标签业务操作"></a>6 整合MyBatis完成标签业务操作</h3><h4 id="6-1-业务描述-1"><a href="#6-1-业务描述-1" class="headerlink" title="6.1 业务描述"></a>6.1 业务描述</h4><p>基于SpringBoot脚手架工程对MyBatis框架的整合，实现对微博内容weibo表进行操作。</p>
<h4 id="6-2-Dao接口设计"><a href="#6-2-Dao接口设计" class="headerlink" title="6.2 Dao接口设计"></a>6.2 Dao接口设计</h4><p><strong>WeiboMapper.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatisxml.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.tedu.mybatisxml.pojo.Weibo;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">WeiboMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**在微博表中插入数据*/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Weibo weibo)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**查询所有微博信息*/</span></span><br><span class="line">    List&lt;Weibo&gt; <span class="title function_">selectWeibo</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**根据微博id查询数据*/</span></span><br><span class="line">    Weibo <span class="title function_">selectByWeiboId</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**更新微博表数据*/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateById</span><span class="params">(Weibo weibo)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**删除微博表数据*/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="6-3-定义映射文件UserMapper-xml"><a href="#6-3-定义映射文件UserMapper-xml" class="headerlink" title="6.3 定义映射文件UserMapper.xml"></a>6.3 定义映射文件UserMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 1.填写namespace，填写WeiboMapper的绝对路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.tedu.mybatisxml.mapper.WeiboMapper&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--在微博表中插入数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO weibo</span><br><span class="line">        VALUES (NULL, #&#123;content&#125;, #&#123;created&#125;, #&#123;userId&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--查询所有微博信息</span></span><br><span class="line"><span class="comment">        resultType填写ProductMapper中 List&lt;Product&gt; 中的类名的绝对路径</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectWeibo&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.mybatisxml.pojo.Weibo&quot;</span>&gt;</span></span><br><span class="line">        SELECT *</span><br><span class="line">        FROM weibo</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--根据微博id查询数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectByWeiboId&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.mybatisxml.pojo.Weibo&quot;</span>&gt;</span></span><br><span class="line">        SELECT *</span><br><span class="line">        FROM weibo</span><br><span class="line">        WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--更新微博表数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateById&quot;</span>&gt;</span></span><br><span class="line">        UPDATE weibo</span><br><span class="line">        SET content=#&#123;content&#125;,</span><br><span class="line">            created=#&#123;created&#125;,</span><br><span class="line">            user_id=#&#123;userId&#125;</span><br><span class="line">        WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--删除微博表数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span>&gt;</span></span><br><span class="line">        DELETE</span><br><span class="line">        FROM weibo</span><br><span class="line">        WHERE id = 2</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="6-4-Dao接口单元测试"><a href="#6-4-Dao接口单元测试" class="headerlink" title="6.4 Dao接口单元测试"></a>6.4 Dao接口单元测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**自动装配*/</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> WeiboMapper weiboMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**在微博表中插入数据-测试方法*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">InsertWeibo</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Weibo</span> <span class="variable">weibo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Weibo</span>();</span><br><span class="line">    weibo.setContent(<span class="string">&quot;今天天气真不错呀&quot;</span>);</span><br><span class="line">    weibo.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    weibo.setUserId(<span class="number">1</span>);</span><br><span class="line">    weiboMapper.insert(weibo);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**查询所有微博信息-测试方法*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectWeiboTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(weiboMapper.selectWeibo());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**根据微博id查询数据*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectByWeiboIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(weiboMapper.selectByWeiboId(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**更新微博表数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateById</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Weibo</span> <span class="variable">weibo</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Weibo</span>();</span><br><span class="line">    weibo.setId(<span class="number">2</span>);</span><br><span class="line">    weibo.setContent(<span class="string">&quot;人生得意须尽欢&quot;</span>);</span><br><span class="line">    weibo.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    weibo.setUserId(<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    System.out.println(weiboMapper.updateById(weibo));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**删除微博表数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteByIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(weiboMapper.deleteById(<span class="number">2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-整合MyBatis完成标签业务操作"><a href="#7-整合MyBatis完成标签业务操作" class="headerlink" title="7 整合MyBatis完成标签业务操作"></a>7 整合MyBatis完成标签业务操作</h3><h4 id="7-1-业务描述"><a href="#7-1-业务描述" class="headerlink" title="7.1 业务描述"></a>7.1 业务描述</h4><p>基于SpringBoot脚手架工程对MyBatis框架的整合，实现对微博内容weibo表进行操作。</p>
<h4 id="7-2-Dao接口设计"><a href="#7-2-Dao接口设计" class="headerlink" title="7.2 Dao接口设计"></a>7.2 Dao接口设计</h4><p><strong>文件：CommentMapper.java</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.tedu.mybatisxml.mapper;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Mapper;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.annotations.Param;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CommentMapper</span> &#123;</span><br><span class="line">    <span class="comment">/**在评论表中插入数据*/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">insertComment</span><span class="params">(<span class="meta">@Param(&quot;content&quot;)</span> String content, <span class="meta">@Param(&quot;user_id&quot;)</span> Integer userId, <span class="meta">@Param(&quot;weibo_id&quot;)</span> Integer weiboId)</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**修改品论数据*/</span></span><br><span class="line">    <span class="type">int</span> <span class="title function_">updateCommentById</span><span class="params">(<span class="meta">@Param(&quot;content&quot;)</span> String content, <span class="meta">@Param(&quot;id&quot;)</span> Integer id)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="7-3-定义映射文件UserMapper-xml"><a href="#7-3-定义映射文件UserMapper-xml" class="headerlink" title="7.3 定义映射文件UserMapper.xml"></a>7.3 定义映射文件UserMapper.xml</h4><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.填写namespace，填写CommentMapper的绝对路径 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.tedu.mybatisxml.mapper.CommentMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--在评论表中插入数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertComment&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO comment(content, user_id, weibo_id)</span><br><span class="line">        VALUES (#&#123;content&#125;, #&#123;user_id&#125;, #&#123;weibo_id&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--修改品论数据--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateCommentById&quot;</span>&gt;</span></span><br><span class="line">        UPDATE comment</span><br><span class="line">        SET content=#&#123;content&#125;</span><br><span class="line">        WHERE id = #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="7-4-Dao接口单元测试"><a href="#7-4-Dao接口单元测试" class="headerlink" title="7.4 Dao接口单元测试"></a>7.4 Dao接口单元测试</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**自动装配*/</span></span><br><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> CommentMapper commentMapper;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**在评论表中插入数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insertCommentTest</span><span class="params">()</span>&#123;</span><br><span class="line">    commentMapper.insertComment(<span class="string">&quot;我学习了param注解，真高兴&quot;</span>, <span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**修改品论数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">updateCommentByIdTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(commentMapper.updateCommentById(<span class="string">&quot;这是修改后的评论&quot;</span>, <span class="number">3</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-动态SQL语句"><a href="#8-动态SQL语句" class="headerlink" title="8 动态SQL语句"></a>8 动态SQL语句</h3><ul>
<li><p>什么是动态SQL</p>
<p>​		动态SQL是指在程序运行时动态生成SQL语句的技术。它允许开发人员在程序运行时根据不同的条件拼接SQL语句，从而灵活地构建各种查询。</p>
<p>​		动态SQL可以通过字符串拼接、条件语句以及循环等手段实现。使用动态SQL，开发人员可以根据不同的条件动态地拼接SQL语句，从而实现更加灵活的查询。</p>
</li>
</ul>
<p><font color="red">DELETE FROM comment WHERE id in(2,3,5)  此处id的值不确定，数量也不确定！</font></p>
<h4 id="8-1-动态删除数据"><a href="#8-1-动态删除数据" class="headerlink" title="8.1 动态删除数据"></a>8.1 动态删除数据</h4><p>演示 <code>&lt;foreache&gt;</code> 标签的使用</p>
<h5 id="8-1-1-Dao接口设计"><a href="#8-1-1-Dao接口设计" class="headerlink" title="8.1.1 Dao接口设计"></a>8.1.1 Dao接口设计</h5><p><strong>文件：CommentMapper</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**1.第一种批量删除: 传递Integer的数组*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByIds1</span><span class="params">(Integer[] ids)</span>;</span><br><span class="line"><span class="comment">/**2.第二种批量删除: ...代表可变参数*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByIds2</span><span class="params">(Integer... ids)</span>;</span><br><span class="line"><span class="comment">/**3.第三种批量删除：传递集合参数*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByIds3</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure>

<h5 id="8-1-2-定义映射文件UserMapper-xml"><a href="#8-1-2-定义映射文件UserMapper-xml" class="headerlink" title="8.1.2 定义映射文件UserMapper.xml"></a>8.1.2 定义映射文件UserMapper.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 批量删除-数组格式：</span></span><br><span class="line"><span class="comment">        collection用来设置遍历对象的类型，</span></span><br><span class="line"><span class="comment">        item设置遍历出每一个变量的名称</span></span><br><span class="line"><span class="comment">        separator设置分隔符</span></span><br><span class="line"><span class="comment">        注意：注释一定要放在delete标签的外面，不能放在里面，放在里面会被当做sql语句执行！</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds1&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM comment WHERE id IN(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 动态参数 Integer... ids ，也会按照数组遍历，除了集合都是数组 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds2&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM comment WHERE id IN(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 集合传参，需要把collection改为 list --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds3&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM comment WHERE id IN(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="8-1-3-Dao接口单元测试"><a href="#8-1-3-Dao接口单元测试" class="headerlink" title="8.1.3 Dao接口单元测试"></a>8.1.3 Dao接口单元测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**1.第一种批量删除: 传递Integer的数组-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">delete1</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 测试数组方式删除</span></span><br><span class="line">    Integer[] ids = &#123;<span class="number">2</span>, <span class="number">8</span>&#125;;</span><br><span class="line">    commentMapper.deleteByIds1(ids);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**2.第二种批量删除: ...代表可变参数-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">delete2</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 测试可变参数方式删除</span></span><br><span class="line">    commentMapper.deleteByIds2(<span class="number">11</span>, <span class="number">16</span>, <span class="number">17</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**3.第三种批量删除：传递集合参数-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">delete3</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="comment">// 测试集合方式删除</span></span><br><span class="line">    ArrayList&lt;Integer&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    ids.add(<span class="number">18</span>);</span><br><span class="line">    ids.add(<span class="number">20</span>);</span><br><span class="line">    ids.add(<span class="number">22</span>);</span><br><span class="line">    commentMapper.deleteByIds3(ids);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="8-2-动态修改数据"><a href="#8-2-动态修改数据" class="headerlink" title="8.2 动态修改数据"></a>8.2 动态修改数据</h4><ul>
<li><p>说明</p>
<p>​		如果表中字段很多，但是只改部分字段数据，比如只修改部分字段的值，不修改其他字段的值，如果使用对象作为参数则会将其他字段的值也修改为null，如果使用传参方式解决，参数过多也会很麻烦，所以可以使用动态修改。</p>
</li>
<li><p>实现</p>
<p>使用xml中的 <code>&lt;set&gt;&lt;/set&gt;</code>  和 <code>&lt;if&gt;&lt;/if&gt;</code> 标签组合</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;dynamicUpdate&quot;</span>&gt;</span></span><br><span class="line">    UPDATE product</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;title!=null&quot;</span>&gt;</span>title=#&#123;title&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;price!=null&quot;</span>&gt;</span>price=#&#123;price&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;num!=null&quot;</span>&gt;</span>num=#&#123;num&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    WHERE id=#&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="8-1-1-Dao接口设计-1"><a href="#8-1-1-Dao接口设计-1" class="headerlink" title="8.1.1 Dao接口设计"></a>8.1.1 Dao接口设计</h5><p><strong>文件：CommentMapper</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**动态修改数据*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">dynamicUpdate</span><span class="params">(Comment comment)</span>;</span><br></pre></td></tr></table></figure>

<h5 id="8-1-2-定义映射文件UserMapper-xml-1"><a href="#8-1-2-定义映射文件UserMapper-xml-1" class="headerlink" title="8.1.2 定义映射文件UserMapper.xml"></a>8.1.2 定义映射文件UserMapper.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 动态修改</span></span><br><span class="line"><span class="comment">     问题:如果修改局部可能会导致多出逗号</span></span><br><span class="line"><span class="comment">     使用&lt;set&gt;标签，会自动识别是否多逗号，如果最后一个是逗号会自动去掉逗号</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;dynamicUpdate&quot;</span>&gt;</span></span><br><span class="line">    UPDATE comment</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;content!=null&quot;</span>&gt;</span>content=#&#123;content&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;created!=null&quot;</span>&gt;</span>created=#&#123;created&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userId!=null&quot;</span>&gt;</span>user_id=#&#123;userId&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;weiboId!=null&quot;</span>&gt;</span>weibo_id=#&#123;weiboId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    WHERE id=#&#123;id&#125;;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="8-1-3-Dao接口单元测试-1"><a href="#8-1-3-Dao接口单元测试-1" class="headerlink" title="8.1.3 Dao接口单元测试"></a>8.1.3 Dao接口单元测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**动态修改数据-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dynamicUpdateTest</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Comment</span> <span class="variable">comment</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Comment</span>();</span><br><span class="line">    comment.setId(<span class="number">27</span>);</span><br><span class="line">    comment.setContent(<span class="string">&quot;莫使金樽空对月&quot;</span>);</span><br><span class="line">    comment.setUserId(<span class="number">666</span>);</span><br><span class="line">    commentMapper.dynamicUpdate(comment);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="8-3-统计数据条数"><a href="#8-3-统计数据条数" class="headerlink" title="8.3 统计数据条数"></a>8.3 统计数据条数</h4><p>统计评论表中的数据总数。</p>
<h5 id="8-3-1-Dao接口设计"><a href="#8-3-1-Dao接口设计" class="headerlink" title="8.3.1 Dao接口设计"></a>8.3.1 Dao接口设计</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**统计数量*/</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>

<h5 id="8-3-2-映射文件CommentMapper-xml"><a href="#8-3-2-映射文件CommentMapper-xml" class="headerlink" title="8.3.2 映射文件CommentMapper.xml"></a>8.3.2 映射文件CommentMapper.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--统计数量：注意一定要添加 resultType属性--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    SELECT COUNT(*) FROM comment</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h5 id="8-3-3-Dao接口单元测试"><a href="#8-3-3-Dao接口单元测试" class="headerlink" title="8.3.3 Dao接口单元测试"></a>8.3.3 Dao接口单元测试</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**统计数量-测试*/</span></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectCountTest</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(commentMapper.selectCount());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="9-SQL语句重用"><a href="#9-SQL语句重用" class="headerlink" title="9 SQL语句重用"></a>9 SQL语句重用</h3><h4 id="6-1-说明"><a href="#6-1-说明" class="headerlink" title="6.1 说明"></a>6.1 说明</h4><p>​		SQL语句重用是指在数据库应用程序中，多次执行相同或类似的SQL语句时，通过重用这些语句来提高性能，减少系统消耗的资源。</p>
<h4 id="6-2-实现"><a href="#6-2-实现" class="headerlink" title="6.2 实现"></a>6.2 实现</h4><p>​		使用 <code>&lt;sql&gt;&lt;/sql&gt;</code>  和 <code>&lt;include&gt;&lt;/include</code> 标签组合实现</p>
<p>​		<code>&lt;sql&gt;&lt;sql&gt;</code> 标签中存放重复的SQL语句，使用 <code>&lt;include&gt;&lt;/include&gt;</code> 标签获取重复的SQL</p>
<h4 id="6-3-示例"><a href="#6-3-示例" class="headerlink" title="6.3 示例"></a>6.3 示例</h4><p>在三种动态删除的SQL语句中，都有重复的SQL语句：<code>DELETE FROM comment WHERE id IN</code>，可以将重复的语句抽取出来，来简化SQL。</p>
<ol>
<li><p>mappers.CommentMapper.xml 将删除语句重复的SQL抽取出来</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 1.重复SQL抽取-sql标签 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;deleteSql&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM comment WHERE id in</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds1&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.通过include标签复用-include标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;deleteSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span>(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds2&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.通过include标签复用-include标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;deleteSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span>(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds3&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--2.通过include标签复用-include标签--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;deleteSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span>(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>执行对应的测试用例测试</p>
</li>
</ol>
<h3 id="10-订单管理系统练习"><a href="#10-订单管理系统练习" class="headerlink" title="10 订单管理系统练习"></a>10 订单管理系统练习</h3><h4 id="10-1-工程准备"><a href="#10-1-工程准备" class="headerlink" title="10.1 工程准备"></a>10.1 工程准备</h4><ul>
<li><p>在mybatisdb库中创建订单表order</p>
<p>包括订单编号id，订单状态status，订单总金额amount，订单创建created时间四个字段</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE DATABASE mybatisdb;</span><br><span class="line">USE mybatisdb;</span><br><span class="line">CREATE TABLE orders(</span><br><span class="line">	id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    state VARCHAR(20),</span><br><span class="line">	amount DOUBLE(10,2),</span><br><span class="line">    created TIMESTAMP</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建工程mybatis-exercise2，3个钩，SpringBoot版本为2.7.11</p>
</li>
<li><p>application.properties配置文件中添加连接数据库的配置</p>
</li>
<li><p>application.properties配置文件中添加xml文件的路径</p>
</li>
</ul>
<h4 id="7-2-要求"><a href="#7-2-要求" class="headerlink" title="7.2 要求"></a>7.2 要求</h4><ul>
<li>添加一个订单：insert</li>
<li>查询所有订单：selectAll</li>
<li>通过id查询1个订单：selectOne</li>
<li>动态修改订单：dynamicUpdate</li>
<li>通过一个id删除订单：deleteById</li>
<li>通过多个id批量删除订单：deleteMany</li>
<li>统计订单总数：selectCount</li>
</ul>
<h4 id="7-3-实现"><a href="#7-3-实现" class="headerlink" title="7.3 实现"></a>7.3 实现</h4><h5 id="7-3-1-准备工作"><a href="#7-3-1-准备工作" class="headerlink" title="7.3.1 准备工作"></a>7.3.1 准备工作</h5><ol>
<li><p>工程目录下创建pojo包并在其中创建类Orders</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Orders</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String state;</span><br><span class="line">    <span class="keyword">private</span> Double amount;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Getter()  Setter()  toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建mapper.OrdersMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">OrdersMapper</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建目录mappers,拷贝xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="7-3-2-操作实现"><a href="#7-3-2-操作实现" class="headerlink" title="7.3.2 操作实现"></a>7.3.2 操作实现</h5><ul>
<li><p><strong>添加一个订单：insert</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">insert</span><span class="params">(Orders orders)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;cn.tedu.mybatisexercise2.mapper.OrdersMapper&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insert&quot;</span>&gt;</span></span><br><span class="line">        INSERT INTO orders VALUES (NULL,#&#123;state&#125;,#&#123;amount&#125;,#&#123;created&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>boot051ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired(required = false)</span></span><br><span class="line">OrdersMapper mapper;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">insert</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Orders</span>();</span><br><span class="line">    o.setState(<span class="string">&quot;已完成&quot;</span>);</span><br><span class="line">    o.setAmount(<span class="number">8000.0</span>);</span><br><span class="line">    o.setCreated(<span class="keyword">new</span> <span class="title class_">Date</span>());</span><br><span class="line">    System.out.println(mapper.insert(o));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>查询所有订单：selectAll</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Orders&gt; <span class="title function_">selectAll</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.mybatisexercise2.pojo.Orders&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM orders</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>boot051ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.selectAll());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>通过id查询1个订单：selectOne</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Orders <span class="title function_">selectById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.mybatisexercise2.pojo.Orders&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM orders WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>boot051ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectById</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.selectById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>动态修改订单-只修改订单状态：dynamicUpdate</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">dynamicUpdate</span><span class="params">(Orders orders)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;dynamicUpdate&quot;</span>&gt;</span></span><br><span class="line">    UPDATE orders</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;state!=null&quot;</span>&gt;</span>state=#&#123;state&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;amount!=null&quot;</span>&gt;</span>amount=#&#123;amount&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;created!=null&quot;</span>&gt;</span>created=#&#123;created&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>boot051ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">dynamicUpdate</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Orders</span> <span class="variable">o</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Orders</span>();</span><br><span class="line">    o.setId(<span class="number">1</span>);</span><br><span class="line">    o.setState(<span class="string">&quot;已完成&quot;</span>);</span><br><span class="line">    System.out.println(mapper.dynamicUpdate(o));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>通过一个id删除订单：deleteById</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM orders WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>boot051ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteById</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.deleteById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>通过多个id批量删除订单：deleteMany</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">deleteMany1</span><span class="params">(Integer[] ids)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteMany2</span><span class="params">(Integer... ids)</span>;</span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteMany3</span><span class="params">(List&lt;Integer&gt; ids)</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMany1&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM orders WHERE id in(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMany2&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM orders WHERE id in(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteMany3&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM orders WHERE id in(</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;list&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span></span><br><span class="line">        #&#123;id&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Mybatisexercise2ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteMany1</span><span class="params">()</span>&#123;</span><br><span class="line">    Integer[] ids = &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>&#125;;</span><br><span class="line">    System.out.println(mapper.deleteMany1(ids));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteMany2</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.deleteMany2(<span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteMany3</span><span class="params">()</span>&#123;</span><br><span class="line">    ArrayList&lt;Integer&gt; ids = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    ids.add(<span class="number">10</span>);</span><br><span class="line">    ids.add(<span class="number">11</span>);</span><br><span class="line">    ids.add(<span class="number">13</span>);</span><br><span class="line">    System.out.println(mapper.deleteMany3(ids));</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>统计订单总数：selectCount</strong></p>
<ol>
<li><p>mapper.OrderMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>mappers.OrderMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    SELECT COUNT(*) FROM orders</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>mybatisexercise2ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectCount</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.selectCount());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
</li>
<li><p><strong>SQL重用优化</strong></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectSql&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM orders</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.boot051.entity.Orders&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.boot051.entity.Orders&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="11-分类管理系统练习"><a href="#11-分类管理系统练习" class="headerlink" title="11 分类管理系统练习"></a>11 分类管理系统练习</h3><h4 id="8-1-要求"><a href="#8-1-要求" class="headerlink" title="8.1 要求"></a>8.1 要求</h4><ol>
<li><p>在数据库mybatisdb中创建分类表t_category 字段包含: 编号id、分类名称name、分类介绍intro、创建时间created</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE  t_category(</span><br><span class="line">    id INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">    name VARCHAR(50),</span><br><span class="line">    intro VARCHAR(100),</span><br><span class="line">    created TIMESTAMP</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
</li>
<li><p>工程准备</p>
<ul>
<li>创建工程mybatis-exercise3，3个钩，SpringBoot版本为2.7.11</li>
<li>application.properties配置文件中添加连接数据库的配置</li>
<li>application.properties配置文件中添加xml文件扫描路径</li>
</ul>
</li>
<li><p>在工程的测试类中实现以下功能</p>
<ul>
<li>添加一个分类</li>
<li>查询所有分类</li>
<li>通过id查询分类</li>
<li>动态修改分类</li>
<li>通过一个id删除分类</li>
<li>通过多个id批量删除分类</li>
<li>统计分类数量</li>
</ul>
</li>
</ol>
<h4 id="11-2-实现步骤"><a href="#11-2-实现步骤" class="headerlink" title="11.2 实现步骤"></a>11.2 实现步骤</h4><h5 id="11-2-1-准备工作"><a href="#11-2-1-准备工作" class="headerlink" title="11.2.1 准备工作"></a>11.2.1 准备工作</h5><ol>
<li><p>创建pojo.Category</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Category</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String intro;</span><br><span class="line">    <span class="keyword">private</span> Date created;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Getter() Setter() toString()</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建mapper.CategoryMapper</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@mapper</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">CategoryMapper</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>创建目录mappers,拷贝xml配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>
<h5 id="11-2-2-操作实现"><a href="#11-2-2-操作实现" class="headerlink" title="11.2.2 操作实现"></a>11.2.2 操作实现</h5><ol>
<li><p>CategoryMapper中定义7个方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> <span class="title function_">insert</span><span class="params">(Category category)</span>;</span><br><span class="line">List&lt;Category&gt; <span class="title function_">select</span><span class="params">()</span>;</span><br><span class="line">Category <span class="title function_">selectById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">(Category category)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(<span class="type">int</span> id)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">deleteByIds</span><span class="params">(Integer... ids)</span>;</span><br><span class="line"><span class="type">int</span> <span class="title function_">selectCount</span><span class="params">()</span>;</span><br></pre></td></tr></table></figure>
</li>
<li><p>xml配置文件：resources.mappers.CategoreMapper.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;select&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.mybatisexercise3.pojo.Category&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM t_category</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.mybatisexercise3.pojo.Category&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM t_category WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;update&quot;</span>&gt;</span></span><br><span class="line">    UPDATE t_category</span><br><span class="line">    <span class="tag">&lt;<span class="name">set</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name!=null&quot;</span>&gt;</span>name=#&#123;name&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;intro!=null&quot;</span>&gt;</span>intro=#&#123;intro&#125;,<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;created!=null&quot;</span>&gt;</span>created=#&#123;created&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">set</span>&gt;</span></span><br><span class="line">    WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectCount&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;int&quot;</span>&gt;</span></span><br><span class="line">    SELECT COUNT(*) FROM t_category</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM t_category WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteByIds&quot;</span>&gt;</span></span><br><span class="line">    DELETE FROM t_category WHERE id in (</span><br><span class="line">    <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">collection</span>=<span class="string">&quot;array&quot;</span> <span class="attr">item</span>=<span class="string">&quot;id&quot;</span> <span class="attr">separator</span>=<span class="string">&quot;,&quot;</span>&gt;</span>#&#123;id&#125;<span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">    )</span><br><span class="line"><span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>Mybatisexercise3ApplicationTests</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">select</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.select());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectById</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.selectById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">update</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="type">Category</span> <span class="variable">c</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Category</span>();</span><br><span class="line">    c.setId(<span class="number">1</span>);</span><br><span class="line">    c.setName(<span class="string">&quot;数码科技&quot;</span>);</span><br><span class="line">    mapper.update(c);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">selectCount</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.selectCount());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">delete</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.deleteById(<span class="number">1</span>));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="keyword">void</span> <span class="title function_">deleteByIds</span><span class="params">()</span>&#123;</span><br><span class="line">    System.out.println(mapper.deleteByIds(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>SQL重用优化</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sql</span> <span class="attr">id</span>=<span class="string">&quot;selectSql&quot;</span>&gt;</span></span><br><span class="line">    SELECT * FROM t_category</span><br><span class="line"><span class="tag">&lt;/<span class="name">sql</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.boot052.entity.Category&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;cn.tedu.boot051.entity.Category&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">include</span> <span class="attr">refid</span>=<span class="string">&quot;selectSql&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">include</span>&gt;</span> WHERE id=#&#123;id&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
</ol>

    </div>

    
    
    

    <footer class="post-footer">

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2020/05/10/Linux%E5%B8%B8%E8%A7%81%E5%91%BD%E4%BB%A4/" rel="prev" title="Linux常见命令">
                  <i class="fa fa-chevron-left"></i> Linux常见命令
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/03/11/Spring/" rel="next" title="Spring">
                  Spring <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阳光与鲜花</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  




  





</body>
</html>
